!function(){function t(t,i,e){for(var n={},o=0,s=t.length,r=0;s>r;r++){var h=new Image;h.onload=function(){o++,o===s&&(i.images=n,i.preLoaded=!0,e())},h.src=t[r],n[t[r]]=h}}window.Preloader=t}(),function(){function t(){}function i(t){for(var i in o)if(o.hasOwnProperty(i)&&o[i]===t)return i;return" "!=String.fromCharCode(t)?String.fromCharCode(t):void 0}function e(t,e){var o=i(t);o&&(n[o]=e)}var n={},o={SPACE:32,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40};t.isPressedKey=function(t){return n[t]},window.addEventListener("keydown",function(t){e(t.keyCode,!0)}),window.addEventListener("keyup",function(t){e(t.keyCode,!1)}),window.addEventListener("blur",function(t){n={}}),window.Controls=t}(),function(){function t(t){this.image=t.image,this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.delay=t.delay,this.loop=t.lopp||!1,this.delayCounter=0,this.frames=t.frames,this.frameIndex=0,this.animated=!1}function i(t,i){CTX.drawImage(t.image,i,0,t.width,t.height,t.x,t.y,t.width,t.height)}t.prototype.render=function(){i(this,0)},t.prototype.update=function(){this.frameIndex===this.frames-1?(this.loop||(this.animated=!0),this.frameIndex=0):this.delayCounter===this.delay&&(this.frameIndex++,this.delayCounter=0);var t=this.frameIndex*this.width;i(this,t),this.delayCounter++},window.Sprite=t}(),function(){function t(){}t.isCollided=function(t,i){return t.x+t.width>=i.x&&t.x<=i.x+i.width&&t.y>=i.y&&t.y<=i.y+i.height},window.Collision=t}(),function(){function t(){}t.text=function(t,i,e,n){CTX.font=n.font,CTX.fillStyle=n.color,n.textAlign&&(CTX.textAlign=n.textAlign),CTX.fillText(t,i,e)},window.Util=t}();var CTX;!function(){function t(t){this.canvas=document.querySelector(t.className),this.ctx=this.canvas.getContext("2d"),CTX=this.ctx,this.width=t.width,this.height=t.height,this.background=t.background||"#fff",this.statuses={gameTime:0},this.states={},this.events={},this.lastTick,this.dt,this.images=[],this.preLoaded=!1,this.canvas.focus()}function i(t){n(t),t.events.start&&t.events.start(),e(t)}function e(t){var i=Date.now();(i-t.lastTick)/1e3;window.requestAnimationFrame(function(){e(t)}),t.clearCanvas(),n(t),t.events.update&&t.events.update()}function n(t){t.ctx.fillStyle="#000",t.ctx.fillRect(0,0,t.width,t.height)}t.prototype.init=function(){this.preLoaded?i(this):this.events.preload&&this.events.preload()},t.prototype.bg=function(){n(this)},t.prototype.on=function(t,i){"function"==typeof i&&(this.events[t]=i)},t.prototype.clearCanvas=function(){this.ctx.clearRect(0,0,this.width,this.height)},t.prototype.preload=function(t){var i=this;Preloader(t,this,function(){i.init()})},t.prototype.controls=window.Controls,t.prototype.sprite=window.Sprite,t.prototype.collision=window.Collision,t.prototype.text=window.Util.text,window.Maned=t,window.CTX=CTX}();