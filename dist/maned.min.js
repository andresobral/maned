!function(){function t(t,n,o){var a={},s=0,r=t.length;if(0==r)n.preLoaded=!0,o();else for(var h=0;r>h;h++)if("image"==e(t[h])){var d=new Image;d.onload=function(){s++,s===r&&(n.images=a,n.preLoaded=!0,o())},d.src=t[h],a[t[h]]=d}else i(t[h],function(t){n.data.push(t),s++,s===r&&(n.images=a,n.preLoaded=!0,o())})}function e(t){var e=/\.([0-9a-z]+)(?=[?#])|(\.)(?:[\w]+)$/;switch(t.match(e)[0]){case".jpg":case".jpeg":case".png":case".bmp":return"image";case".json":return"data";default:return"other"}}function i(t,e){var i;return window.XMLHttpRequest&&(i=new XMLHttpRequest),i?(i.onreadystatechange=function(){4===i.readyState&&(200===i.status?e(i.responseText):console.log("Something went wrong!"))},i.open("GET",t),void i.send()):(console.log("Request failed..."),!1)}window.Preloader=t}(),function(){function t(){}function e(t){for(var e in o)if(o.hasOwnProperty(e)&&o[e]===t)return e;return" "!=String.fromCharCode(t)?String.fromCharCode(t):void 0}function i(t,i){var o=e(t);o&&(n[o]=i)}var n={},o={SPACE:32,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40};t.isPressedKey=function(t){return n[t]},window.addEventListener("keydown",function(t){i(t.keyCode,!0)}),window.addEventListener("keyup",function(t){i(t.keyCode,!1)}),window.addEventListener("blur",function(t){n={}}),window.Controls=t}(),function(){function t(t){this.image=t.image,this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.delay=t.delay,this.loop=t.lopp||!1,this.delayCounter=0,this.frames=t.frames,this.frameIndex=0,this.animated=!1}function e(t,e){CTX.drawImage(t.image,e,0,t.width,t.height,t.x,t.y,t.width,t.height)}t.prototype.render=function(){e(this,0)},t.prototype.update=function(){this.frameIndex===this.frames-1?(this.loop||(this.animated=!0),this.frameIndex=0):this.delayCounter===this.delay&&(this.frameIndex++,this.delayCounter=0);var t=this.frameIndex*this.width;e(this,t),this.delayCounter++},window.Sprite=t}(),function(){function t(){}t.overlap=function(t,e,i,n){return e>=i&&n>=t},t.isCollided=function(t,e){return this.overlap(t.x,t.x+t.width,e.x,e.x+e.width)&&this.overlap(t.y,t.y+t.height,e.y,e.y+e.height)},window.Collision=t}(),function(){function t(){}t.text=function(t,e,i,n){CTX.font=n.font,CTX.fillStyle=n.color,n.textAlign&&(CTX.textAlign=n.textAlign),CTX.fillText(t,e,i)},window.Util=t}(),function(){function t(t,e){this.data=JSON.parse(t),this.tileset=e,this.create()}function e(t,e,n,o,a,s,r){var h=i(t,n),d=h.x*o,c=h.y*a;CTX.drawImage(e,d,c,o,a,s,r,o,a)}function i(t,e){var i=t.data.tilesets[0].imagewidth/t.data.tilewidth,n=(t.data.tilesets[0].imageheight/t.data.tileheight,Math.floor(e/i)+1),o={x:e-(n-1)*i-1,y:n-1};return o}t.prototype.create=function(){for(var t=this.data.layers[0].width,i=this.data.layers[0].height,n=0,o=0;i>o;o++)for(var a=0;t>a;a++)e(this,this.tileset,this.data.layers[0].data[n],32,32,32*a,32*o),n++},window.Tile=t}();var CTX;!function(){function t(t){this.canvas=document.querySelector(t.className),this.ctx=this.canvas.getContext("2d"),CTX=this.ctx,this.width=t.width,this.height=t.height,this.background=t.background||"#fff",this.images=[],this.data=[],this.events={},this.preLoaded=!1,this.fps=t.fps,this.canvas.focus()}function e(t){n(t),t.events.start&&t.events.start(),i(t)}function i(t){window.requestAnimationFrame(function(){i(t)}),s=Date.now(),h=s-r,h>o&&(r=s-h%o,t.clearCanvas(),n(t),t.events.update&&t.events.update())}function n(t){t.ctx.fillStyle=t.background,t.ctx.fillRect(0,0,t.width,t.height)}var o,a,s,r,h;t.prototype.init=function(){o=1e3/this.fps,r=Date.now(),a=r,this.preLoaded?e(this):this.events.preload&&this.events.preload()},t.prototype.bg=function(){n(this)},t.prototype.on=function(t,e){"function"==typeof e&&(this.events[t]=e)},t.prototype.clearCanvas=function(){this.ctx.clearRect(0,0,this.width,this.height)},t.prototype.preload=function(t){var e=this;Preloader(t,this,function(){e.init()})},t.prototype.controls=window.Controls,t.prototype.sprite=window.Sprite,t.prototype.collision=window.Collision,t.prototype.tile=window.Tile,t.prototype.text=window.Util.text,window.Maned=t,window.CTX=CTX}();